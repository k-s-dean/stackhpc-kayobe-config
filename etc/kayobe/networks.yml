---
# Kayobe network configuration.

###############################################################################
# Network role to network mappings.

# Name of the network used for admin access to the overcloud
admin_oc_net_name: admin_oc

# Name of the network used by the seed to manage the bare metal overcloud
# hosts via their out-of-band management controllers.
oob_oc_net_name:

# Name of the network used by the seed to provision the bare metal overcloud
# hosts.
provision_oc_net_name: admin_oc

# Name of the network used by the overcloud hosts to manage the bare metal
# compute hosts via their out-of-band management controllers.
oob_wl_net_name:

# Name of the network used by the overcloud hosts to provision the bare metal
# workload hosts.
#provision_wl_net_name:
provision_wl_net_name:

# Name of the network used to expose the internal OpenStack API endpoints.
#internal_net_name:
internal_net_name: internal

# List of names of networks used to provide external network access via
# Neutron.
# Deprecated name: external_net_name
# If external_net_name is defined, external_net_names will default to a list
# containing one item, external_net_name.
#external_net_names:
external_net_names: [external]

# Name of the network used to expose the public OpenStack API endpoints.
public_net_name: public

# Name of the network used by Neutron to carry tenant overlay network traffic.
tunnel_net_name: tunnel

# Name of the network used to carry storage data traffic.
storage_net_name: storage

# Name of the network used to carry storage management traffic.
storage_mgmt_net_name: storage_mgmt

# Name of the network used to carry ceph storage data traffic.
#ceph_storage_net_name:

# Name of the network used to carry ceph storage management traffic.
#ceph_storage_mgmt_net_name:

# Name of the network used to carry swift storage data traffic.
#swift_storage_net_name:

# Name of the network used to carry swift storage replication traffic.
#swift_storage_replication_net_name:

# Name of the network used to perform hardware introspection on the bare metal
# workload hosts.
inspection_net_name:

# Name of the network used to perform cleaning on the bare metal workload
# hosts
cleaning_net_name:

###############################################################################
# Network definitions.

# IP subnet from which site subnets are allocated.
base_cidr: 10.0.0.0/8

# IP subnet from which real subnets are allocated for this site.
site_cidr_index: 10
site_cidr: "{{ base_cidr | ipsubnet(16, site_cidr_index) }}"

# 10.$site.32.0/22
admin_oc_cidr_index: 8
admin_oc_cidr: "{{ site_cidr | ipsubnet(22, admin_oc_cidr_index) }}"
admin_oc_gateway: "{{ admin_oc_cidr | ipaddr('first_usable') }}"
admin_oc_allocation_pool_start: "{{ admin_oc_cidr | next_nth_usable(2) }}"
admin_oc_allocation_pool_end: "{{ admin_oc_cidr | ipaddr('last_usable') }}"
admin_oc_vlan: 100

# 10.$site.36.0/22
internal_cidr_index: 9
internal_cidr: "{{ site_cidr | ipsubnet(22, internal_cidr_index) }}"
internal_vip_address: "{{ internal_cidr | ipaddr('last_usable') }}"
internal_allocation_pool_start: "{{ internal_cidr | next_nth_usable(2) }}"
internal_allocation_pool_end: "{{ internal_vip_address | ipmath(-1) }}"
internal_vlan: 101

# 195.114.30.0/24
public_fqdn: create.leaf.cloud
public_vip_address: 195.114.30.254
public_vlan: 5

# 10.$site.40.0/22
tunnel_cidr_index: 10
tunnel_cidr: "{{ site_cidr | ipsubnet(22, tunnel_cidr_index) }}"
tunnel_allocation_pool_start: "{{ tunnel_cidr | next_nth_usable(2) }}"
tunnel_allocation_pool_end: "{{ tunnel_cidr | ipaddr('last_usable') }}"
tunnel_vlan: 102

# 10.$site.44.0/22
storage_cidr_index: 11
storage_cidr: "{{ site_cidr | ipsubnet(22, storage_cidr_index) }}"
storage_allocation_pool_start: "{{ storage_cidr | next_nth_usable(2) }}"
storage_allocation_pool_end: "{{ storage_cidr | ipaddr('last_usable') }}"
storage_vlan: 103

# 10.$site.48.0/22
storage_mgmt_cidr_index: 12
storage_mgmt_cidr: "{{ site_cidr | ipsubnet(22, storage_mgmt_cidr_index) }}"
storage_mgmt_allocation_pool_start: "{{ storage_mgmt_cidr | next_nth_usable(2) }}"
storage_mgmt_allocation_pool_end: "{{ storage_mgmt_cidr | ipaddr('last_usable') }}"
storage_mgmt_vlan: 104

# Octavia load balancer management network.
# 10.$site.56.0/22
lb_mgmt_cidr_index: 14
lb_mgmt_cidr: "{{ site_cidr | ipsubnet(22, lb_mgmt_cidr_index) }}"
lb_mgmt_allocation_pool_start: "{{ lb_mgmt_cidr | next_nth_usable(2) }}"
lb_mgmt_allocation_pool_end: "{{ lb_mgmt_cidr | next_nth_usable(63) }}"
lb_mgmt_neutron_allocation_pool_start: "{{ lb_mgmt_cidr | next_nth_usable(64) }}"
lb_mgmt_neutron_allocation_pool_end: "{{ lb_mgmt_cidr | ipaddr('last_usable') }}"
lb_mgmt_vlan: 206

# MAAS provisioning network.
maas_cidr: "10.10.0.0/22"

###############################################################################
# Network virtual patch link configuration.

# Suffix for Open vSwitch bridge names.
#network_bridge_suffix_ovs:

# Prefix for virtual patch interface names.
#network_patch_prefix:

# Suffix for virtual patch link interface names when connected towards the
# physical interface.
#network_patch_suffix_phy:

# Suffix for virtual patch link interface names when connected towards the
# OVS bridge.
#network_patch_suffix_ovs:

###############################################################################
# Network routing table configuration.

# List of IP routing tables. Each item should be a dict containing 'id' and
# 'name' items. These tables will be added to /etc/iproute2/rt_tables.
#network_route_tables:

###############################################################################
# Dummy variable to allow Ansible to accept this file.
workaround_ansible_issue_8743: yes
